# WBABEProject-14

# ğŸ“– ëª©ì°¨ 
 - [ì†Œê°œ](#ì†Œê°œ) 
 - [ì‚¬ìš©ë²•](#ì‚¬ìš©ë²•)
 - [ë””ë ‰í† ë¦¬ êµ¬ì¡°](#ë””ë ‰í† ë¦¬-êµ¬ì¡°)
 - [ê°œë°œ í™˜ê²½](#ê°œë°œ-í™˜ê²½)
 - [ì‚¬ìš© ê¸°ìˆ ](#ì‚¬ìš©-ê¸°ìˆ )
 - [ì„œë²„ ì•„í‚¤í…ì²˜](#ì„œë²„-ì•„í‚¤í…ì²˜) 
 - [Api ëª…ì„¸ì„œ](#api-ëª…ì„¸ì„œ)
 - [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
    - [í”¼ì£¼ë¬¸ì](#í”¼ì£¼ë¬¸ì)
        - [ë©”ë‰´ ìƒì„±](#ë©”ë‰´-ìƒì„±)
        - [ë©”ë‰´ ìˆ˜ì •](#ë©”ë‰´-ìˆ˜ì •)
        - [ë©”ë‰´ ì‚­ì œ](#ë©”ë‰´-ì‚­ì œ)
        - [ì¶”ì²œ ë©”ë‰´ ë³€ê²½](#ì¶”ì²œ-ë©”ë‰´-ë³€ê²½)
        - [í˜„ì¬ ì£¼ë¬¸ë‚´ì—­ ì¡°íšŒ](#í˜„ì¬-ì£¼ë¬¸ë‚´ì—­-ì¡°íšŒ)
        - [ë©”ë‰´ë³„ ì£¼ë¬¸ìš”ì²­ ìƒíƒœ ë³€ê²½](#ë©”ë‰´ë³„-ì£¼ë¬¸ìš”ì²­-ìƒíƒœ-ë³€ê²½)
    - [ì£¼ë¬¸ì](#ì£¼ë¬¸ì)
        - [ë©”ë‰´ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ](#ë©”ë‰´-ë¦¬ìŠ¤íŠ¸-ì¡°íšŒ)
        - [ì£¼ë¬¸ ìƒì„±](#ì£¼ë¬¸-ìƒì„±)
        - [ì£¼ë¬¸ ë©”ë‰´ ë³€ê²½](#ì£¼ë¬¸-ë©”ë‰´-ë³€ê²½)
        - [ë¦¬ë·° ì‘ì„±](#ë¦¬ë·°-ì‘ì„±)
        - [ë©”ë‰´ í‰ì  ë¦¬ë·° ì¡°íšŒ](#ë©”ë‰´-í‰ì -ë¦¬ë·°-ì¡°íšŒ)
        - [í˜„ì¬ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ](#í˜„ì¬-ì£¼ë¬¸-ë‚´ì—­-ì¡°íšŒ)
 
    
    
# ì†Œê°œ 

ì–¸íƒíŠ¸ ì‹œëŒ€ì— ê¸‰ì¦í•˜ê³  ìˆëŠ” ì˜¨ë¼ì¸ ì£¼ë¬¸ ì‹œìŠ¤í…œì€ ì´ë¯¸ ìƒí™œì „ë°˜ì— ê·¸ ì˜í–¥ì„ ë¼ì¹˜ê³  ìˆëŠ” ìƒí™©ì—, ê°€ê¹ê²ŒëŠ” ë°°ë‹¬ì–´í”Œ, ë§¤ì¥ì—ëŠ” í‚¤ì˜¤ìŠ¤í¬, <br> ì‹ë‹¹ì—ëŠ” íŒ¨ë“œë¥¼ ì´ìš©í•œ ë©”ë‰´ ì£¼ë¬¸ê¹Œì§€ ê·¸ ì‚¬ìš©ë²”ìœ„ê°€ ì ì  í™•ëŒ€ë˜ì–´ ê°€ê³  ìˆìŠµë‹ˆë‹¤.<br> ì´ëŸ° ì‹œëŒ€ì— í•´ë‹¹ ì‹œìŠ¤í…œì„ ì´í•´, ê²½í—˜í•˜ê³  ê° ë‹¨ê³„ë³„ í”„ë¡œì„¸ìŠ¤ë¥¼ ì´í•´í•˜ì—¬ êµ¬í˜„í•¨ìœ¼ë¡œì¨ ì„œë¹„ìŠ¤ êµ¬ì¶•ì— ê²½í—˜ì„ ìŒ“ê³ , golangì˜ ì´í•´ë¥¼ ë•ìŠµë‹ˆë‹¤.

1. ì£¼ë¬¸ì/í”¼ì£¼ë¬¸ìì˜ ì—­í• ì—ì„œ í•„ìˆ˜ì ì¸ ê¸°ëŠ¥ì„ ë„ì¶œ, êµ¬í˜„í•©ë‹ˆë‹¤.
2. í•´ë‹¹ ì‹œìŠ¤í…œì— ëŒ€í•´ ìš”êµ¬ì‚¬í•­ì„ ì ‘ìˆ˜í•˜ê³  ì£¼ë¬¸ìì™€ í”¼ì£¼ë¬¸ì ì…ì¥ì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ì„ ë„ì¶œí•˜ì—¬, ê¸°ëŠ¥ì„ í™•ì¥í•˜ê³  ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ì›í• í•˜ê²Œ ì§€ì›í• ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
3. ì£¼ë¬¸ìëŠ” ì‹ ë¢°ìˆëŠ” ì£¼ë¬¸ê³¼ ë°°ë‹¬ê¹Œì§€ë¥¼ ì›í•©ë‹ˆë‹¤. ë˜, í”¼ì£¼ë¬¸ìëŠ” ì£¼ë¬¸ë‚´ì—­ì„ ê´€ë¦¬í•˜ê³  ì›í• í•œ ì„œë¹„ìŠ¤ê°€ ì œê³µë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

### ì‚¬ìš©ë²•
```bash
$ docker start mongodb

$ git clone https://github.com/codestates/WBABEProject-14.git
$ cd go-mvc-project/
$ go mod tidy
> go run main.go
```

### ê°œë°œ í™˜ê²½
- Mac OS M1
- vscode
- MongoDB Compass
- Docker 
- PostMan
- Talen API Tester

### ì‚¬ìš© ê¸°ìˆ 
- Go(go1.19.4 darwin/arm64)
- Gin Gonic
- MongoDB
- Swagger 

### ë””ë ‰í† ë¦¬ êµ¬ì¡° 

```
â”œâ”€â”€ config         
â”‚   â”œâ”€â”€ config.go  
â”‚   â””â”€â”€ config.toml
â”œâ”€â”€ controller     
â”‚   â”œâ”€â”€ controller.go
â”‚   â”œâ”€â”€ orderer.controller.go /* ì£¼ë¬¸ì ì»¨íŠ¸ë¡¤ëŸ¬ */
â”‚   â””â”€â”€ taker.controller.go   /* í”¼ì£¼ë¬¸ì ì»¨íŠ¸ë¡¤ëŸ¬ */
â”œâ”€â”€ docs
â”‚   â”œâ”€â”€ docs.go
â”‚   â”œâ”€â”€ swagger.json
â”‚   â””â”€â”€ swagger.yaml
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ logger
â”‚   â””â”€â”€ logger.go
â”œâ”€â”€ logs
â”‚   â””â”€â”€ go-loger_2022-12-20.log
â”œâ”€â”€ main.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€ menu.go     /* ë©”ë‰´ ëª¨ë¸ */
â”‚   â”œâ”€â”€ model.go    /* ëª¨ë¸ ì •ì˜ */
â”‚   â”œâ”€â”€ order.go    /* ì£¼ë¬¸ ëª¨ë¸ */
â”‚   â”œâ”€â”€ response.go /* ì‘ë‹µ ë©”ì„¸ì§€ ëª¨ë¸ */
â”‚   â”œâ”€â”€ review.go   /* ë¦¬ë·° ëª¨ë¸ */
â”‚   â””â”€â”€ swaggerModel.go /* ìŠ¤ì›¨ê±° ì‘ì„±ì‹œ ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ëª¨ë¸ */
â”œâ”€â”€ route
â”‚   â””â”€â”€ route.go
â””â”€â”€ services
    â”œâ”€â”€ orderer.service.go      /* ì£¼ë¬¸ì ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ */
    â”œâ”€â”€ orderer.service.impl.go /* ì£¼ë¬¸ì ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ */
    â”œâ”€â”€ taker.service.go        /* í”¼ì£¼ë¬¸ì ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ */
    â””â”€â”€ taker.service.impl.go   /* í”¼ì£¼ë¬¸ì ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ */
```

### ì„œë²„ ì•„í‚¤í…ì²˜ 

<img src="https://user-images.githubusercontent.com/103496262/209453624-da34cdbd-62cb-41c3-80b8-c73a3975ba3e.png">


### API ëª…ì„¸ì„œ

<details>
<summary>ğŸ“‹ Swagger ìŠ¤í¬ë¦°ìƒ· ë³´ê¸°</summary>
<div markdown="1">

<img src="https://user-images.githubusercontent.com/103496262/209471052-fb6d1d6b-bcc5-4895-aa21-a392b123db7e.png"/>

</div>
</details>


```
í”„ë¡œì íŠ¸ ì‹¤í–‰í›„ ì•„ë˜ ë„ë©”ì¸ ìœ¼ë¡œ ì ‘ì† 
http://localhost:8080/swagger/index.html#/ 
```

# ì£¼ìš” ê¸°ëŠ¥

# í”¼ì£¼ë¬¸ì
## ë©”ë‰´ ìƒì„±
[func CreateMenu()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/taker.service.impl.go#L29-L46)
### Request
`POST /api/v01/taker/menu`
```json
{
  "storenumber":100,
  "limitorder": 300,
  "menuname": "ìš°ë™",
  "orderstatus": false,
  "origin": "êµ­ë‚´ì‚°",
  "price": 15000,
  "spice": 0
}
```

### Response
```json
{
  "message": "success"
}
```
## ë©”ë‰´ ìˆ˜ì •
[func UpdateMenu()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/taker.service.impl.go#L48-L63)
### Request
`PUT /api/v01/taker/menu/ìš°ë™`

```json
{
  "limitorder": 300,
  "orderstatus": false,
  "origin": "êµ­ë‚´ì‚°",
  "price": 5500,
  "spice": 0
}
```
### Response 
```json
{
  "message": "success"
}
```
## ë©”ë‰´ ì‚­ì œ 
[func DeleteMenu()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/taker.service.impl.go#L65-L75)
### Request
`DELETE /api/v01/taker/menu`
```json
{
  "menuname": "ìš°ë™"
}
```
### Response 
```json
{
  "message": "success"
}
```
## ì¶”ì²œ ë©”ë‰´ ë³€ê²½
[func UpdateMenuRecommend()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/taker.service.impl.go#L77-L100)

```bash
PATCH /api/v01/taker/menu
```
### Request
```json
{
  "menuname": "ìš°ë™"
}
```
### Response 
```json
{
  "menuList": [
    {
      "_id": "63a73a1c8d989838729bc114",
      "createdat": "2022-12-24T13:17:12.793+00:00",
      "grade": 3.5,
      "isdelete": false,
      "limitorder": 100,
      "menuname": "ë–¡ë³¶ì´",
      "orderstatus": true,
      "origin": "êµ­ë‚´ì‚°",
      "price": 10000,
      "recommend": true,
      "reorder": 30,
      "spice": 3
    },
    {
      "_id": "63a79abf892e3345fd2f2150",
      "createdat": "2022-12-24T16:22:41.551+00:00",
      "grade": 2.5,
      "isdelete": false,
      "limitorder": 200,
      "menuname": "ê¹€ë°¥",
      "orderstatus": true,
      "origin": "êµ­ë‚´ì‚°",
      "price": 5000,
      "recommend": true,
      "reorder": 50,
      "spice": 0
    }
    ...
  ]
}
```
## í˜„ì¬ ì£¼ë¬¸ë‚´ì—­ ì¡°íšŒ 
[func GetOrderList()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/taker.service.impl.go#L102-L116)


`GET /api/v01/taker/orders`

### Request
### Response 
```json
{
  "orders": [
    {
      "_id": "63a73a1c8d989838729bc114",
      "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ê°•ë‚¨ë™ 1212-202 101í˜¸",
      "createdat": "2022-12-24T16:17:12.793+00:00",
      "isdelete": false,
      "isexistreview": false,
      "menuname": "ë–¡ë³¶ì´",
      "ordernumber": 11,
      "phone": "010xxxxxxxx",
      "status": 0
    },
    {
      "_id": "63a79abf892e3345fd2f2150",
      "address": "ì„œìš¸ì‹œ ìš©ì‚°êµ¬ ìš©ì‚°ë™ 2525-111 303í˜¸",
      "createdat": "2022-12-24T18:11:22.440+00:00",
      "isdelete": false,
      "isexistreview": false,
      "menuname": "ìš°ë™",
      "ordernumber": 12,
      "phone": "010xxxxxxxx",
      "status": 0
    }
    ...
  ]
}
```
## ë©”ë‰´ë³„ ì£¼ë¬¸ìš”ì²­ ìƒíƒœ ë³€ê²½
[UpdateOrderStatus](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/taker.service.impl.go#L118-L135)

`PATCH /api/v01/taker/orders/{menuname}`
### Request
```json
{
  "status": 0
}
```
### Response 
```json
{
  "message": "success"
}
```

# ì£¼ë¬¸ì
 
## ë©”ë‰´ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ 
[func GetAllMenu()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/orderer.service.impl.go#L57-L72)

### Request 
`GET /api/v01/orderer/menu/{sort}`

`sort : [recommend, grade, reorder, createdat] ì¤‘ í•˜ë‚˜ íƒí•˜ì—¬ ìš”ì²­`

### Response 
```json
{
  "menuList": [
    {
      "_id": "63a73a1c8d989838729bc114",
      "createdat": "2022-12-24T16:17:12.793+00:00",
      "grade": 3.5,
      "isdelete": false,
      "limitorder": 100,
      "menuname": "ë–¡ë³¶ì´",
      "orderstatus": true,
      "origin": "êµ­ë‚´ì‚°",
      "price": 150000,
      "recommend": true,
      "reorder": 30,
      "spice": 3
    },
    {
      "_id": "63a79abf892e3345fd2f2150",
      "createdat": "2022-12-24T18:42:20.191+00:00",
      "grade": 4,
      "isdelete": false,
      "limitorder": 50,
      "menuname": "ìš°ë™",
      "orderstatus": true,
      "origin": "êµ­ë‚´ì‚°",
      "price": 5000,
      "recommend": true,
      "reorder": 50,
      "spice": 0
    },
    ...
  ]
}
```

## ì£¼ë¬¸ ìƒì„±
[func CreateMenu()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/orderer.service.impl.go#L32-L55)

### Request 
`POST /api/v01/orderer/order`

```json
{
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ê°•ë‚¨ë™ 1212-202 101í˜¸",
  "menuname": "ë–¡ë³¶ì´",
  "phone": "01020221225"
}
```
### Response 
```json
{
  "ì£¼ë¬¸ë²ˆí˜¸": 15
}
```

## ì£¼ë¬¸ ë©”ë‰´ ë³€ê²½
[func UpdateOrder()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/orderer.service.impl.go#L146-L211)

### Request 
`PATCH /api/v01/orderer/order/{orderId}/{flag}`
```json
{
  "menuname": "ìš°ë™"
}
```

### Response 

```json
{
  "message": "success"
}
```

### OR

```json
{
  "message": "í•´ë‹¹ ì£¼ë¬¸ì€ ë°°ë‹¬ì¤‘ì…ë‹ˆë‹¤. ì‹ ê·œì£¼ë¬¸ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "ordernumber": 17
}
```


## ë¦¬ë·° ì‘ì„±
[func CreateReview()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/orderer.service.impl.go#L90-L144)
### Request 
`POST /api/v01/orderer/review/{orderID}`

```json
{
  "comment": "ë§›ìˆì–´ìš”",
  "grade": 3.5
}
```

### Response 
```json
{
  "message": "success"
}
```

## ë©”ë‰´ í‰ì  ë¦¬ë·° ì¡°íšŒ
[func GetAllReview()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/orderer.service.impl.go#L74-L88)
### Request 

`GET /api/v01/orderer/detailMenu/{menuname}`

### Response 
```json
{
  "avgGrade": 3.5,
  "reviewList": [
    {
      "_id": "63a73a1c8d989838729bc114",
      "comment": "ë§›ìˆì—ˆìŠµë‹ˆë‹¤.",
      "createdat": "2022-12-24T17:42:53.949+00:00",
      "grade": 3,
      "isdelete": false,
      "menuname": "ë–¡ë³¶ì´"
    },
    {
      "_id": "63a79abf892e3345fd2f2150')",
      "comment": "ë§›ì—†ì–´ìš”.",
      "createdat": "2022-12-24T17:44:19.147+00:00",
      "grade": 4,
      "isdelete": false,
      "menuname": "ë–¡ë³¶ì´"
    },
    ...
  ]
}
```

## í˜„ì¬ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
[func Orders()](https://github.com/codestates/WBABEProject-14/blob/444bbb6ec3a2690a55dc284f948745caca543974/go-mvc-project/services/orderer.service.impl.go#L213-L237)
### Request 
`GET /api/v01/orderer/orders`

### Response  

```json
{
  "currentOrders": [
    {
      "_id": "63a79abf892e3345fd2f2150",
      "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ê°•ë‚¨ë™ 1212-202 101í˜¸",
      "createdat": "2022-12-24T16:17:12.793+00:00",
      "isdelete": false,
      "isexistreview": false,
      "menuname": "ë–¡ë³¶ì´",
      "ordernumber": 1,
      "phone": "010xxxxxxxx",
      "status": 0
    },
    ...
  ],
  "pastOrders": [
    {
      "_id": "63a73a1c8d989838729bc114",
      "address": "ì„œìš¸ì‹œ ìš©ì‚°êµ¬ ìš©ì‚°ë™ 1212-202 303í˜¸",
      "createdat": "2022-12-24T16:15:44.327+00:00",
      "isdelete": false,
      "isexistreview": false,
      "menuname": "ìš°ë™",
      "ordernumber": 0,
      "phone": "010xxxxxxxx",
      "status": 5
    },
    ...
  ]
}
```
